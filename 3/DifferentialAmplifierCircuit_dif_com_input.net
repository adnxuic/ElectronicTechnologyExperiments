* G:\LTspiceFile\ElectronicTechnologyExperiments\3\DifferentialAmplifierCircuit_dif_com_input.asc
* Generated by LTspice 24.1.9 for Windows.
Q1 Vc1 Vi1 N002 0 2N2222
Q2 Vc2 Vi2 N003 0 2N3391A
Q3 N004 N005 N006 0 2N3904
R1 Vi1 0 510
R2 Vi2 0 510
R3 N001 Vc1 10k
R4 N001 Vc2 10k
R5 N005 N007 13k
R6 N001 N005 62k
R7 N006 N007 3k
V1 N001 0 12
V2 N007 0 -12
X§U1 N002 N003 N004 potentiometer R=330 wiper=0.5195
V5 Vi1 0 {Vic + Vid/2}
V6 Vi2 0 {Vic - Vid/2}
.model NPN NPN
.model PNP PNP
.lib C:\Users\34261\AppData\Local\LTspice\lib\cmp\standard.bjt
* --- 1. 定义一个从1到4的步骤参数 'run' ---
.step param run 1 4 1
* --- 2. 使用 table() 函数根据 'run' 的值来设定 Vid 和 Vic ---
* run=1: 差模, +0.1V (Vid=0.1, Vic=0)
* run=2: 差模, -0.1V (Vid=-0.1, Vic=0)
* run=3: 共模, +0.1V (Vid=0, Vic=0.1)
* run=4: 共模, -0.1V (Vid=0, Vic=-0.1)
.param Vid = table(run, 1, 0.1, 2, -0.1, 3, 0,   4, 0)
.param Vic = table(run, 1, 0,   2, 0,    3, 0.1, 4, -0.1)
* --- 3. 运行一个短暂的瞬态分析来获取直流稳定值 ---
.tran 1ms
* --- 4. 测量每个 'run' 的直流输出值 (对应表格中的 "测量值") ---
* 必须为4个步骤中的每一个显式定义测量
* 开始
.measure TRAN Vc1_run1 AVG V(Vc1)
.measure TRAN Vc2_run1 AVG V(Vc2)
.measure TRAN Vod_run1 AVG (V(Vc1) - V(Vc2))
.lib potentiometer.lib
.backanno
.end
